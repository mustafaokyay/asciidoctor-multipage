<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="author" content="Author Name">
<title>MultipageHtml5Converter Sample</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="Quarkus" class="book toc2 toc-left">
<div id="header">
<h1>MultipageHtml5Converter Sample</h1>
<div class="details">
<span id="author" class="author">Author Name</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="sample.html">MultipageHtml5Converter Sample</a></span></p><ul class="sectlevel0">
<li><a href="about-sample.html">About This Sample</a>
</li>
<li><a href="devon4j-documentation.html">Java</a>
<ul class="sectlevel1">
<li><a href="General.html">3. General</a>
</li>
<li><a href="Spring.html">4. Spring</a>
</li>
<li><a href="Quarkus.html"><span class="toc-current">5. Quarkus</span></a>
<ul class="sectlevel2">
<li><a href="Quarkus.html#_creating_a_new_application">5.1. Creating a new application</a>
</li>
<li><a href="Quarkus.html#_quarkus_2">5.2. Quarkus</a>
</li>
<li><a href="Quarkus.html#_quarkus_quickstart">5.3. Quarkus Quickstart</a>
</li>
<li><a href="Quarkus.html#_migrate_from_spring_to_quarkus">5.4. Migrate from Spring to Quarkus</a>
</li>
<li><a href="Quarkus.html#_spring_native_vs_quarkus">5.5. Spring Native vs Quarkus</a>
</li>
<li><a href="Quarkus.html#_modern_project_structure">5.6. Modern project structure</a>
</li>
<li><a href="Quarkus.html#_domain_layer">5.7. Domain Layer</a>
</li>
<li><a href="Quarkus.html#_guides_2">5.8. Guides</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="Quarkus">5. Quarkus</h2>
<div class="sectionbody">
<!-- toc disabled -->
<div class="sect2">
<h3 id="_creating_a_new_application">5.1. Creating a new application</h3>
<div class="sect3">
<h4 id="_running_the_archetype">5.1.1. Running the archetype</h4>
<div class="paragraph">
<p>In order to create a new application you must use the archetype provided by devon4j which uses the maven archetype functionality.</p>
</div>
<div class="paragraph">
<p>To create a new application, you should have installed devonfw IDE. Follow the devon ide documentation to install
the same.
You can choose between 2 alternatives, create it from command line or, in more visual manner, within eclipse.</p>
</div>
<div class="sect4">
<h5 id="_from_command_line">From command Line</h5>
<div class="paragraph">
<p>To create a new devon4j application from command line, you can simply run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">devon java create com.example.application.sampleapp</code></pre>
</div>
</div>
<div class="paragraph">
<p>For low-level creation you can also manually call this command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">mvn -DarchetypeVersion=${devon4j.version} -DarchetypeGroupId=com.devonfw.java.templates -DarchetypeArtifactId=devon4j-template-server archetype:generate -DgroupId=com.example.application -DartifactId=sampleapp -Dversion=1.0.0-SNAPSHOT -Dpackage=com.devonfw.application.sampleapp</code></pre>
</div>
</div>
<div class="paragraph">
<p>Attention: The <code>archetypeVersion</code> (first argument) should be set to the latest version of <code>devon4j</code>. You can easily determine the version from this badge:
<span class="image"><img src="https://javadoc.io/badge2/com.devonfw.java.modules/devon4j-basic/javadoc.svg" alt="latest devon4j version"></span></p>
</div>
<div class="paragraph">
<p>Further providing additional properties (using <code>-D</code> parameter) you can customize the generated app:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 16. Options for app template</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>property</strong></th>
<th class="tableblock halign-left valign-top"><strong>comment</strong></th>
<th class="tableblock halign-left valign-top"><strong>example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Choose the type of RDBMS to use (<code>hana</code>, <code>oracle</code>, <code>mssql</code>, <code>postgresql</code>, <code>mariadb</code>, <code>mysql</code>, etc.)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-DdbTpye=postgresql</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>batch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Option to add an <code>batch</code> module</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-Dbatch=batch</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_from_eclipse">From Eclipse</h5>
<div class="literalblock">
<div class="content">
<pre>After that, you should follow this Eclipse steps to create your application:</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a new Maven Project.</p>
</li>
<li>
<p>Choose the devon4j-template-server archetype, just like the image.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/eclipse-m2e-create-devon4j-project.png" alt="Select archetype">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Fill the Group Id, Artifact Id, Version and Package for your project.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/eclipse-m2e-create-devon4j-project-parameters.png" alt="Configure archetype">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Finish the Eclipse assistant and you are ready to start your project.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_what_is_generated">5.1.2. What is generated</h4>
<div class="paragraph">
<p>The application template (archetype) generates a Maven multi-module project. It has the following modules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>api</code>: module with the API (REST service interfaces, transferobjects, datatypes, etc.) to be imported by other apps as a maven dependency in order to invoke and consume the offered (micro)services.</p>
</li>
<li>
<p><code>core</code>: maven module containing the core of the application.</p>
</li>
<li>
<p><code>batch</code>: optional module for <a href="guide-batch-layer.asciidoc">batch</a>(es)</p>
</li>
<li>
<p><code>server</code>: module that bundles the entire app (<code>core</code> with optional <code>batch</code>) as a WAR file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The toplevel <code>pom.xml</code> of the generated project has the following features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Properties definition: Spring-boot version, Java version, etc.</p>
</li>
<li>
<p>Modules definition for the modules (described above)</p>
</li>
<li>
<p>Dependency management: define versions for dependencies of the technology stack that are recommended and work together in a compatible way.</p>
</li>
<li>
<p>Maven plugins with desired versions and configuration</p>
</li>
<li>
<p>Profiles for <a href="guide-testing.asciidoc">test stages</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_how_to_run_your_app">5.1.3. How to run your app</h4>
<div class="sect4">
<h5 id="_run_app_from_ide">Run app from IDE</h5>
<div class="paragraph">
<p>To run your application from your favourite IDE, simply launch <code>SpringBootApp</code> as java application.</p>
</div>
</div>
<div class="sect4">
<h5 id="_run_app_as_bootified_jar_or_war">Run app as bootified jar or war</h5>
<div class="paragraph">
<p>More details are available <a href="guide-structure-classic.asciidoc#deployment">here</a>.</p>
</div>
<!-- toc disabled -->
</div>
</div>
</div>
<div class="sect2">
<h3 id="_quarkus_2">5.2. Quarkus</h3>
<div class="paragraph">
<p><a href="https://quarkus.io">Quarkus</a> is a Java framework for building cloud-native apps.
It is fully supported by <a href="https://devonfw.com">devonfw</a> as an option and alternative to <a href="spring.asciidoc">spring</a>.
Additional things like extensions will be available on the  <a href="https://github.com/devonfw/devon4quarkus">devon4quarkus</a> GitHub repository.</p>
</div>
<div class="sect3">
<h4 id="_guide_to_the_reader_2">5.2.1. Guide to the Reader</h4>
<div class="paragraph">
<p>Depending on your intention of reading this document, you might be more interested in the following chapters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you are completely new to Quarkus, you may be interested in the <a href="quarkus.asciidoc#pros">pros</a> and <a href="quarkus.asciidoc#cons">cons</a> of Quarkus. Also, take a look at the <a href="https://quarkus.io">official Quarkus website</a>. You might also be interested in the features that <a href="https://www.graalvm.org/">GraalVM</a> offers.</p>
</li>
<li>
<p>If you are new to devon4j, take a look at devon4j&#8217;s recommendations on general best practices. Check out the chapters on <a href="architecture.asciidoc">architecture design</a>, <a href="guide-structure-modern.asciidoc">project structuring</a>, and <a href="coding-conventions.asciidoc">coding conventions</a>. Follow the referenced links to explore a topic in more depth.</p>
</li>
<li>
<p>If you are an experienced Spring developer and want to get in touch with Quarkus, read our <a href="quarkus/getting-started-for-spring-developers.asciidoc">Getting started with Quarkus for Spring developers</a> guide.</p>
</li>
<li>
<p>If you&#8217;re looking to build your first Quarkus application, the Quarkus website offers some good <a href="https://quarkus.io/get-started/">getting started guides</a>. Also, check out our <a href="quarkus/quarkus-template.asciidoc">Quarkus template guide</a>, which gives you some recommendations on extensions and frameworks to use. It also provides some links to the <a href="https://code.quarkus.io/">Quarkus code generator</a> with preselected configurations you can use to create your application.</p>
</li>
<li>
<p>If you want to have a Quarkus sample application using devon4j recommendations, check out our <a href="https://github.com/devonfw-sample/devon4quarkus-reference">Quarkus reference application</a>.</p>
</li>
<li>
<p>If you have a Spring application and want to migrate it to Quarkus, take a look at our <a href="guide-migration-spring-quarkus.asciidoc">migration guide</a>.</p>
</li>
<li>
<p>If you already have some experience with devon4j and Quarkus and need more information on a specific topic, check out our <a href="devon4j.asciidoc#guides">Quarkus guides</a>. If you don&#8217;t find what you are looking for there, check out the <a href="devon4j.asciidoc#general">general section</a>. devon4j uses general solutions for Java, so solutions for both Quarkus and Spring are documented there.</p>
</li>
<li>
<p>If you want to learn how to build native images, check out <a href="quarkus/guide-native-image.asciidoc">this guide</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="pros">5.2.2. Pros</h4>
<div class="paragraph">
<p>Quarkus offers the following benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>fast turn-around cycles for developers</strong><br>
Save changes in your Java code and immediately test the results without restarting or waiting</p>
</li>
<li>
<p><strong>faster start-up and less memory footprint</strong><br>
When building your app as <a href="quarkus/guide-native-image.asciidoc">native-images</a> via <a href="https://www.graalvm.org/">GraalVM</a>, it gets highly optimized. As a result, it starts up lightning fast and consumes much less memory. This is a great advantage for cloud deployment as well as for sustainability. You can find a performance comparison between Spring and Quarkus <a href="performance-comparision-spring-quarkus.asciidoc">here</a>.</p>
</li>
<li>
<p><strong>clean and lean</strong>
As quarkus was born as a cloud-native framework, it is very light-weight and does not carry much history and legacy.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="cons">5.2.3. Cons</h4>
<div class="paragraph">
<p>Quarkus has the following drawbacks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>less flexible</strong><br>
Quarkus is less flexible compared to <a href="spring.asciidoc">spring</a>, or in other words, it is more biased and coupled to specific implementations. However, the implementations  work and you have less things to choose and worry about. However, in case you want to integrate a specific or custom library, you may hit limitations or lose support for <a href="quarkus/guide-native-image.asciidoc">native-images</a>, especially when that library is based on reflection. Therefore, check your requirements and technology stack early on when making your choice.</p>
</li>
<li>
<p><strong>less established</strong><br>
Since quarkus was born in 2019, it is modern but also less established. It will be easier to get developers for <a href="spring.asciidoc">spring</a>, but we already consider quarkus mature and established enough for building production-ready apps.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_quarkus_quickstart">5.3. Quarkus Quickstart</h3>
<div class="paragraph">
<p>This guide serves as a quickstart on how to create a Quarkus app, briefly presenting the key functionalities that Quarkus provides, both for beginners and experienced developers.</p>
</div>
<div class="sect3">
<h4 id="_introduction_to_quarkus">5.3.1. Introduction to Quarkus</h4>
<div class="paragraph">
<p>To get a first introduction to Quarkus, you can read the <a href="../quarkus.asciidoc">Quarkus introduction guide</a>. To get a brief overview of where you can find the important Quarkus related guides, follow the chapter <a href="../quarkus.asciidoc#guide-to-the-reader">guide to the reader</a>.
Also, see the comparison of the <a href="../quarkus.asciidoc#Pros">advantages</a> and <a href="../quarkus.asciidoc#cons">disadvantages</a> of a Quarkus application compared to the alternative framework Spring.
This comparison will be supported by our <a href="../performance-comparison-spring-quarkus.asciidoc">performance comparison between Spring and Quarkus</a>, which demonstrates the lower resource consumption and startup time of Quarkus applications.</p>
</div>
</div>
<div class="sect3">
<h4 id="_installation_of_tools_and_dependencies">5.3.2. Installation of Tools and Dependencies</h4>
<div class="paragraph">
<p>First, we need to install some dependencies and tools before we can start programming. Our tool <a href="https://devonfw.com/website/pages/docs/devonfw-ide-introduction.asciidoc.html">devonfw-ide</a> comes with many development tools for you.
We need to install the following tools for this guide:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven</p>
</li>
<li>
<p>Java</p>
</li>
<li>
<p>any IDE (devonfw-ide supports Eclipse, Intellij and VScode)</p>
</li>
<li>
<p>Docker</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We recommend installing the devonfw-ide with the tools, but if you already have your system configured and the tools above installed, you can skip to <a href="#bootstrap-a-quarkus-project">Bootstrap a Quarkus Project</a>, otherwise we will show you how to set up and update your devonfw-ide.</p>
</div>
<div class="olist arabic">
<div class="title">devonfw-ide</div>
<ol class="arabic">
<li>
<p>Install devonfw-ide<br>
Follow the <a href="https://github.com/devonfw/ide/wiki/setup#setup">Setup</a> to install the devonfw-ide with Java, Maven, Eclipse and VScode.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Command to install Docker<br>
<code>devon docker setup</code></p>
</li>
</ol>
</div>
</li>
<li>
<p>Update devonfw-ide<br>
As we are still working on improving devonfw-ide, we recommend to update your already installed devonfw-ide and tools in order to include essential features for cloud development with Quarkus that you could be missing.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Use the commands <code>devon ide update</code>, <code>devon ide update software</code>, and <code>devon ide scripts</code> to update devonfw-ide and all installed software.</p>
</div>
<div class="paragraph">
<p>Go to the main folder under workspaces of the devonfw-ide installation.
We will create the project there.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bootstrap_a_quarkus_project">5.3.3. Bootstrap a Quarkus Project</h4>
<div class="paragraph">
<p>Quarkus provides multiple ways to bootstrap a project.
The option to bootstrap a project via the command-line is shown in the Quarkus getting started guide <a href="https://quarkus.io/guides/getting-started#bootstrapping-the-project">Bootstrap the project</a>.
Quarkus also provides a project builder where you can select some extensions, the build tool for your project, and if you want, some starter code.
This will deliver a project skeleton with the configured project dependencies and also contributes the information to compile the application natively. To get some recommendations on starter templates, follow the guide on: <a href="guide-template.asciidoc">template recommendations</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>By creating a Quarkus project from the command-line or with the project builder, you get a different project structure and have to adapt it to the devon4j conventions shown in the next Chapter.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_project_structure_2">Project Structure</h5>
<div class="paragraph">
<p>We provide a recommendation and guideline for a <a href="../guide-structure-modern.asciidoc">modern project structure</a> to help organize your project into logically related modules.
In order to comply with the requirements of modern cloud development and microservice architectures, follow the guide and apply the modern project structure to your project. You can also find similar modules in our example projects.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_introduction_to_quarkus_functionality">5.3.4. Introduction to Quarkus Functionality</h4>
<div class="paragraph">
<p>Before we start programming, you should first have a look at the functionality of Quarkus.</p>
</div>
<div class="olist arabic">
<div class="title">Quarkus functionality guides</div>
<ol class="arabic">
<li>
<p><a href="https://quarkus.io/guides/getting-started">Getting started guide from Quarkus</a><br>
This guide presents a good overview of the functionality of Quarkus. The simple <strong>Greeting Service</strong> gives a brief introduction into concepts like CDI, testing, dev mode, packaging, and running the app.</p>
</li>
<li>
<p>From Spring to Quarkus<br>
For experienced Spring developers that have already followed devon4j guidelines, you can read our guide to <a href="getting-started-for-spring-developers.asciidoc">getting started with Quarkus for Spring developer</a>, as it goes more into the differences that can give you a more detailed comparison to Spring.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Migrate a Spring app to Quarkus<br>
This guide shows how to <a href="../guide-migration-spring-quarkus.asciidoc">migrate a Spring application to a Quarkus application with devon4j conventions</a>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_create_a_rest_service">5.3.5. Create a REST service</h4>
<div class="paragraph">
<p>Now let&#8217;s create our first REST CRUD service with Quarkus.
We give you the options of using a guide to start to code the service yourself or to just download a service that&#8217;s ready to use.</p>
</div>
<div class="olist arabic">
<div class="title">Options</div>
<ol class="arabic">
<li>
<p>Create the service yourself<br>
There is a good Quarkus guide for a simple <a href="https://quarkus.io/guides/rest-json#creating-your-first-json-rest-service">JSON REST service</a> that will guide you through your first application and help you with implement the definition of endpoints with JAX-RS and an Entity that will be managed by the service, and also how to <a href="https://quarkus.io/guides/rest-json#json">configure the JSON support</a>.</p>
</li>
<li>
<p>Use an existing Quarkus project<br>
You don&#8217;t want to code a service and just want to test some Quarkus functionalities? Just load a Quarkus <a href="https://github.com/quarkusio/quarkus-quickstarts#quick-start-list">sample project</a> provided for every existing quickstart guide and the supported framework.
Our Team also provides some Quarkus applications that are working and can be loaded and tested.</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/devonfw-sample/devon4quarkus-reference">reference project</a> is a service that manages products. It contains the devon4j modern project structure, pagination, queries, a Postgres database, SwaggerUI, and support for Kubernetes deploy. To add OpenTelemetry support, see the following <a href="https://github.com/devonfw-sample/devon4quarkus-reference/blob/master/documentation/opentelemetry-deployment.asciidoc">guide</a>.
This project will be steadily improved and is used to showcase the abilities of Quarkus with devon4j.</p>
</li>
<li>
<p><a href="https://github.com/devonfw-sample/devon4quarkus-minimal">minimal Quarkus project</a> is just the Quarkus project from a <a href="https://quarkus.io/guides/getting-started">getting started with Quarkus</a> guide with a <strong>Greeting Services</strong> modified with the correct modern structure mentioned in the chapter <a href="#project-structure">Project Structure</a></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_openapi_generation_2">5.3.6. OpenAPI generation</h4>
<div class="paragraph">
<p>We provide a guide with a short introduction to the <a href="../guide-openaoi.asciidoc">OpenAPI specification</a> with two plugins that are important in a Quarkus Context.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="../guide-openaoi.asciidoc#smallrye-openapi">Smallrye Openapi supported by quarkus</a></p>
</li>
<li>
<p><a href="../guide-openaoi.asciidoc#servicedocgen-maven-plugin">servicedocgen Maven Plugin</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A more detailed usage guide to the Smallrye Plugin is provided by <a href="https://quarkus.io/guides/openapi-swaggerui">Quarkus OpenAPI and Swagger guide</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_how_to_integrate_a_database">5.3.7. How to Integrate a Database</h4>
<div class="paragraph">
<p>The next step for our REST service would be to integrate a database to store the objects of the entity.</p>
</div>
<div class="paragraph">
<p>With Quarkus, adding a database can be easy, because Quarkus can take over the build-up and connection process.
First, you should understand our guides on the concepts of working with data. Then, we will show how to integrate a database with Quarkus.</p>
</div>
<div class="olist arabic">
<div class="title">Data Principles Guides</div>
<ol class="arabic">
<li>
<p>General devon4j JPA guide<br>
To get an insight into the general JPA usage, read the <a href="../guide-jpa.asciidoc">JPA guide</a> containing a general explanation of the Java Persistence API.</p>
</li>
<li>
<p>Difference to SpringData<br>
If you have already worked with SpringData, this is also partially supported with Quarkus. This is explained in more detail in this <a href="../guide-repository.asciidoc">SpringData Guide</a>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Database Integration</div>
<ol class="arabic">
<li>
<p>Quarkus zero config dev mode<br>
Starting with the database implementation in Quarkus, we recommend for beginners to use the <a href="https://quarkus.io/guides/datasource#dev-services">DEV mode Zero Config Setup (Dev Services)</a>. This is especially great for testing the code without a database set up.
Quarkus does all the work for you and configures a database and creates the database and tables (schemas) for you.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Configuration Properties<br>
A list of all database configuration properties for the <a href="https://quarkus.io/guides/datasource#configuring-dev-services">Dev services</a></p>
</li>
</ol>
</div>
</li>
<li>
<p>Integrate a simple Hibernate ORM database<br>
The zero config setup only works with the Dev mode, it&#8217;s comfortable in the first phases of the creation of your service but if the goal is to also get a deployable version, you have to create your own database and integrate it.
This Quarkus guide shows, how to integrate a <a href="https://quarkus.io/guides/hibernate-orm">Hibernate ORM database</a> with an example service.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Configuration list for JDBC<br>
A list of all configuration that is possible with a <a href="https://quarkus.io/guides/datasource#jdbc-configuration">JDBC configuration properties</a></p>
</li>
</ol>
</div>
</li>
<li>
<p>Reactive CRUD application with Panache<br>
Quarkus unifies reactive and imperative programming.
Reactive is an architectural principle to build robust, efficient, and concurrent applications.
For an introduction into reactive and how Quarkus enables it, follow this <a href="https://quarkus.io/guides/quarkus-reactive-architecture">Quarkus reactive architecture</a> article and also the <a href="https://quarkus.io/guides/getting-started-reactive">reactive quickstart</a>.
To get started with reactive and implement reactive methods, you can follow the <a href="https://quarkus.io/guides/hibernate-reactive-panache">Quarkus reactive guide</a>.
The reactive guide uses the Quarkus based implementation of a Hibernate ORM called Panache.
The implementation is not our first choice with devon4j and therefore not part of our recommendations, but to understand the reactive guide you can read the <a href="https://quarkus.io/guides/hibernate-orm-panache">Hibernate ORM with Panache guide</a> first to prevent possible problems following the guide.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You need an installed Docker version for the <a href="https://quarkus.io/guides/datasource#dev-services">zero config setup</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Database Migration</div>
<p>For schema-based databases, we recommend migrating databases with Flyway.
In that case, our <a href="../guide-database-migration.asciidoc">general migration guide</a> can give you an overview if you are not familiar with migration.
.. Flyway guide for Quarkus
This Quarkus guide will show how to work with the <a href="https://quarkus.io/guides/flyway">Flyway extension in a Quarkus application</a>.
This should be used if you start your own database and do not leave the creation to quarkus.</p>
</div>
</div>
<div class="sect3">
<h4 id="_testing_a_quarkus_application">5.3.8. Testing a Quarkus Application</h4>
<div class="paragraph">
<p>After we have built the service, we have to verify it with some tests.
We will give you some guidelines to implement some test cases.</p>
</div>
<div class="olist arabic">
<div class="title">Testing Guides</div>
<ol class="arabic">
<li>
<p>General testing guide<br>
For users that aren&#8217;t familiar with the devon4j testing principles, we created a general <a href="../guide-testing.asciidoc">best practices and recommendations guide for testing</a>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Our guide for testing with Quarkus
In addition, we also provide a guide that specifically addresses the <a href="guide-for-testing.asciidoc">testing of a Quarkus application</a>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Most of the Quarkus applications are already equipped with a basic test and our <a href="https://github.com/devonfw-sample/devon4quarkus-reference">reference project</a> provides some further test cases. If you want to improve and extend the tests, you can also follow the large <a href="https://quarkus.io/guides/getting-started-testing">Quarkus guide for testing</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_packaging_of_a_quarkus_application_and_creation_of_a_native_executable">5.3.9. Packaging of a Quarkus application and creation of a native executable</h4>
<div class="paragraph">
<p>Quarkus applications can be packaged into different file types. The following link will show you how to build them and give you a short explanation of the characteristics of these files.</p>
</div>
<div class="olist arabic">
<div class="title">Package types</div>
<ol class="arabic">
<li>
<p><a href="https://quarkus.io/guides/maven-tooling#fast-jar">fast-jar</a></p>
</li>
<li>
<p><a href="https://quarkus.io/guides/maven-tooling#remote-development-mode">mutable-jar</a></p>
</li>
<li>
<p><a href="https://quarkus.io/guides/maven-tooling#uber-jar-maven">uber-jar</a></p>
</li>
<li>
<p><a href="guide-native-image.asciidoc">native executable</a></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To package an application, use the command <code>mvn package</code> and Quarkus will generate the output in the <strong>/target</strong> folder. For the native executables, the command needs more parameters, which is explained in the link above.</p>
</div>
<div class="paragraph">
<p>Configure the Output with these <a href="https://quarkus.io/guides/maven-tooling#configuration-reference">configuration properties</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_create_and_build_a_docker_image">5.3.10. Create and build a Docker Image</h4>
<div class="paragraph">
<p>Quarkus supports Jib, S2I and <a href="https://www.docker.com/">Docker</a> for building images. We focus on building a Quarkus App with Docker.
You get a generated Dockerfile from Quarkus in the src/main/docker folder of any project generated from Quarkus. There are multiple Dockerfiles.</p>
</div>
<div class="olist arabic">
<div class="title">Dockerfiles</div>
<ol class="arabic">
<li>
<p>Dockerfile.jvm<br>
Dockerfile for Quarkus application in the JVM mode. running in <strong>Red Hat Universal Base Image 8 Minimal Container</strong></p>
</li>
<li>
<p>Dockerfile.legacy-jar<br>
DockerFile for Quarkus application in JVM mode with the legacy jar <strong>running in Red Hat Universal Base Image 8 Minimal Container</strong>.</p>
</li>
<li>
<p>Dockerfile.native<br>
Dockerfile using the native executable running in <strong>Red Hat Universal Base Image 8 Minimal container</strong>.</p>
</li>
<li>
<p>Dockerfile.native-distroless
The native file will run in a <strong>Distroless container</strong>. Distroless images are very small containers with just the application and runtime dependencies and without the other programs that come with a Linux distribution.</p>
</li>
</ol>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>For more information to the different executables go back to the chapter <a href="#packaging-of-a-quarkus-application-and-creation-of-a-native-executable">Packaging of a Quarkus application and creation of a native executable</a></p>
</div>
</div>
</div>
<div class="paragraph">
<p>To simply build and run a Docker image, you can follow the instructions Quarkus provides for every Dockerfile in the comments block.</p>
</div>
<div class="paragraph">
<p>Docker commands example for the JVM Dockerfile from our <a href="https://github.com/devonfw-sample/devon4quarkus-reference">reference project</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre>####
# This Dockerfile is used in order to build a container that runs the Quarkus application in JVM mode
#
# Before building the container image run:
#
# ./mvnw package
#
# Then, build the image with:
#
# docker build -f src/main/docker/Dockerfile.jvm -t quarkus/quarkus-basics-jvm .
#
# Then run the container using:
#
# docker run -i --rm -p 8080:8080 quarkus/quarkus-basics-jvm
#
# If you want to include the debug port into your docker image
# you will have to expose the debug port (default 5005) like this :  EXPOSE 8080 5050
#
# Then run the container using :
#
# docker run -i --rm -p 8080:8080 -p 5005:5005 -e JAVA_ENABLE_DEBUG="true" quarkus/quarkus-basics-jvm
#
###</pre>
</div>
</div>
<div class="paragraph">
<p>Quarkus is also able to build the image while packaging the application, so you don&#8217;t have to execute the command from above.
To perform Docker builds with the generated Dockerfiles from above, you need to add the following extension to your project with the command <code>mvn quarkus:add-extension -Dextensions="container-image-docker"</code>.</p>
</div>
<div class="paragraph">
<p>You also have to set the <strong>quarkus.container-image.build=true</strong>. You can add this to your <strong>application.properties</strong> or just append it to the packaging command like this: <code>./mvn package -Dquarkus.container-image.build=true</code>.</p>
</div>
<div class="paragraph">
<p>If your needs exceed the instructions given by the file, we recommend to follow the Docker <a href="https://docs.docker.com/get-started/">getting started guide</a> to get familiar with Docker and customize the Dockerfiles according to your needs.
To specify your container build, you can use the <a href="https://quarkus.io/guides/container-image#container-image-options">general container image configurations properties</a> and the <a href="https://quarkus.io/guides/container-image#docker-options">Docker image configurations properties</a> when building and runnig Docker images.</p>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect2">
<h3 id="_migrate_from_spring_to_quarkus">5.4. Migrate from Spring to Quarkus</h3>
<div class="paragraph">
<p>This guide will cover the migration process of a Spring application to a Quarkus application. There are already articles about migrating from Spring to Quarkus (e.g. <a href="https://developers.redhat.com/blog/2020/04/10/migrating-a-spring-boot-microservices-application-to-quarkus" class="bare">https://developers.redhat.com/blog/2020/04/10/migrating-a-spring-boot-microservices-application-to-quarkus</a>, <a href="https://dzone.com/articles/migrating-a-spring-boot-application-to-quarkus-cha" class="bare">https://dzone.com/articles/migrating-a-spring-boot-application-to-quarkus-cha</a>).
This guide will focus more on the devon4j specific aspects. We assume that a working Spring application exists, built in the <a href="guide-structure-classic.asciidoc">classic devon4j specific way</a> (e.g. <a href="https://github.com/devonfw/jump-the-queue/tree/master/java/jtqj">Jump The Queue</a> or <a href="https://github.com/devonfw/my-thai-star">My Thai Star</a>).</p>
</div>
<div class="sect3">
<h4 id="_create_the_quarkus_application">5.4.1. Create the Quarkus application</h4>
<div class="paragraph">
<p>We start with an empty Quarkus project. You can create the project with Maven on the command line or use the <a href="https://code.quarkus.io/">online generator</a>. The advantage of the online generator is that you have a pre-selection of dependencies to use in your project.
For starters, let&#8217;s select the basic dependencies required to develop a REST service with database connectivity (you can use one of the links in the <a href="quarkus/quarkus-template.asciidoc">Quarkus template guide</a>): <em>RESTEasy JAX-RS, RESTEasy Jackson, Hibernate ORM, Spring Data JPA API, JDBC Driver (choose the type of database you need), Flyway (if you have database migration schemas), SmallRye Health (optional for Health Monitoring)</em></p>
</div>
<div class="paragraph">
<p>The list does not include all required dependencies. We will add more dependencies to the project later. For now, generate the application with these dependencies.</p>
</div>
<div class="sect4">
<h5 id="_migration_toolkit_from_red_hat">Migration Toolkit from Red Hat</h5>
<div class="paragraph">
<p>Red Hat provides a migration toolkit (<a href="https://developers.redhat.com/products/mta/overview">MTA, Migration Toolkit for Applications</a>), that supports migration of a Spring to a Quarkus application. There are several versions of this toolkit (e.g., a web console, a Maven plugin, or an IDE plugin).
The MTA analyzes your existing application and generates a report with hints and instructions for migrating from Spring to Quarkus. For example, it gives you an indication of which dependencies are not supported in your project for a Quarkus application and which dependencies you need to swap them with. The analysis is rule-based, and you can also add your own rules that will be checked during analysis.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_entities">5.4.2. Entities</h4>
<div class="paragraph">
<p>There is nothing special to consider when creating the entities. In most cases, you can simply take the code from your Spring application and use it for your Quarkus application. Usually, the entities extend a superclass <code>ApplicationPersistenceEntity</code> containing, for example, the <code>id</code> property. You can also take this class from your Spring application and reuse it.</p>
</div>
</div>
<div class="sect3">
<h4 id="_transfer_objects_2">5.4.3. Transfer objects</h4>
<div class="paragraph">
<p>The next step is to create the appropriate transfer objects for the entities. In a devon4j Spring application, we would use CobiGen to create these classes. Since CobiGen is not usable for this purpose in Quarkus applications yet, we have to create the classes manually.</p>
</div>
<div class="paragraph">
<p>First, we create some abstract base classes for the search criteria and DTO classes. Normally, these would also be created by CobiGen.</p>
</div>
<div class="listingblock">
<div class="title"><strong>AbstractSearchCriteriaTo</strong></div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public abstract class AbstractSearchCriteriaTo extends AbstractTo {

  private static final long serialVersionUID = 1L;

  private Pageable pageable;

  //getter + setter for pageable
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>AbstractDto</strong></div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public abstract class AbstractDto extends AbstractTo {

  private static final long serialVersionUID = 1L;

  private Long id;

  private int modificationCounter;

  public AbstractDto() {

    super();
  }

  //getter + setter

  @Override
  protected void toString(StringBuilder buffer) {
    ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The class <code>AbstractTo</code>, extended by other classes, would be provided by the <a href="https://github.com/devonfw/devon4j/tree/master/modules/basic"><code>devon4j-basic</code></a> module in a devon4j Spring application. You can take the code from <a href="https://github.com/devonfw/devon4j/blob/master/modules/basic/src/main/java/com/devonfw/module/basic/common/api/to/AbstractTo.java">here</a> and reuse it in your Quarkus project.</p>
</div>
<div class="paragraph">
<p>Now you can create your transfer objects. Most of the code of the transfer objects of your Spring application should be reusable. For Quarkus, we recommend (as mentioned <a href="guide-dto.asciidoc">here</a>) to use <code>*Dto</code> instead of <code>*Eto</code> classes. Be sure to change the names of the classes accordingly.</p>
</div>
</div>
<div class="sect3">
<h4 id="_data_access_layer_2">5.4.4. Data Access Layer</h4>
<div class="paragraph">
<p>In devon4j, we propose to use <a href="guide-repository.asciidoc">Spring Data JPA</a> to build the data access layer using repositories and Querydsl to build <a href="guide-jpa-query.asciidoc#dynamic-queries">dynamic queries</a>. We will also use this approach for Quarkus applications, but we need to change the implementation because the devon4j modules are based on reflection, which is not suitable for Quarkus.
In Quarkus we will use Querydsl using code generation. So for this layer, more changes are required and we can&#8217;t just take the existing code.</p>
</div>
<div class="paragraph">
<p>First, create a repository interface for your entity class that extends <code>JpaRepository</code> (see <a href="guide-repository.asciidoc#repository">here</a>).</p>
</div>
<div class="paragraph">
<p>To add QueryDSL support to your project, add the following dependencies to your pom.xml file:</p>
</div>
<div class="listingblock">
<div class="title"><strong>pom.xml</strong></div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;com.querydsl&lt;/groupId&gt;
  &lt;artifactId&gt;querydsl-jpa&lt;/artifactId&gt;
  &lt;version&gt;4.3.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.querydsl&lt;/groupId&gt;
  &lt;artifactId&gt;querydsl-apt&lt;/artifactId&gt;
  &lt;scope&gt;provided&lt;/scope&gt;
  &lt;version&gt;4.3.1&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>As mentioned above, we will use QueryDSL with code generation. For this, add the QueryDSL annotation processor to your plugins:</p>
</div>
<div class="listingblock">
<div class="title"><strong>pom.xml</strong></div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugins&gt;
...
  &lt;plugin&gt;
    &lt;groupId&gt;com.mysema.maven&lt;/groupId&gt;
    &lt;artifactId&gt;apt-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.1.3&lt;/version&gt;
    &lt;executions&gt;
      &lt;execution&gt;
        &lt;phase&gt;generate-sources&lt;/phase&gt;
        &lt;goals&gt;
          &lt;goal&gt;process&lt;/goal&gt;
        &lt;/goals&gt;
        &lt;configuration&gt;
          &lt;outputDirectory&gt;target/generated-sources/annotations&lt;/outputDirectory&gt;
          &lt;processor&gt;com.querydsl.apt.jpa.JPAAnnotationProcessor&lt;/processor&gt;
        &lt;/configuration&gt;
      &lt;/execution&gt;
    &lt;/executions&gt;
  &lt;/plugin&gt;
&lt;/plugins&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To implement the queries, follow the <a href="guide-jpa-query.asciidoc#dynamic-queries">corresponding guide</a>.</p>
</div>
<div class="paragraph">
<p>Set the following properties in the application.properties file to configure the connection to your database (see also <a href="quarkus/guide-quarkus-configuration.asciidoc#database-configuration">here</a>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">quarkus.datasource.db-kind=...
quarkus.datasource.jdbc.url=...
quarkus.datasource.username=...
quarkus.datasource.password=...</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_logic_layer_2">5.4.5. Logic Layer</h4>
<div class="paragraph">
<p>For the logic layer, devon4j uses a <a href="guide-usecase.asciidoc">use-case approach</a>. You can reuse the use case interfaces from the api module of the Spring application. Again, make sure to rename the transfer objects.</p>
</div>
<div class="paragraph">
<p>Create the appropriate class that implements the interface. Follow the <a href="guide-usecase.asciidoc#implementation">implementation section</a> of the use-case guide to implement the methods. For mapping the entities to the corresponding transfer objects, see the next section.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mapping">5.4.6. Mapping</h4>
<div class="paragraph">
<p>For bean mapping, we need to use a completely different approach in the Quarkus application than in the Spring application. For Quarkus, we use MapStruct, which creates the mapper at build time rather than at runtime using reflection. Add the following dependencies to your pom.xml.</p>
</div>
<div class="listingblock">
<div class="title"><strong>pom.xml</strong></div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;
  &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;
  &lt;version&gt;1.4.2.Final&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;
  &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;
  &lt;version&gt;1.4.2.Final&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can create the mapper as follows:</p>
</div>
<div class="listingblock">
<div class="title"><strong>Mapper</strong></div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Mapper(componentModel = "cdi")
public interface YourEntityMapper {
  YourEntityDto map(YourEntity entity);

  YourEntity map(YourEntityDto dto);

  ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Inject the mapper into your use-case implementation and simply use the methods. The method implementations of the mapper are created when the application is built.</p>
</div>
</div>
<div class="sect3">
<h4 id="_service_layer_2">5.4.7. Service Layer</h4>
<div class="paragraph">
<p>For the implementation of the service layer, we use the <a href="guide-rest#jax-rs">JAX-RS</a> for both Quarkus and Spring applications to create the REST services. Classic devon4j Spring applications rely on Apache CFX as the implemention of JAX-RS.
For Quarkus, we use RESTEasy. Since both are implementations of JAX-RS, much of the Spring application code can be reused.</p>
</div>
<div class="paragraph">
<p>Take the definition of the REST endpoints from the api module of the Spring application (make sure to rename the transfer objects), inject the use-cases from the logic layer and use them in the REST service methods as follows:</p>
</div>
<div class="listingblock">
<div class="title"><strong>REST service</strong></div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Path("/path/v1")
public class YourComponentRestService {

  @Inject
  UcFindYourEntity ucFindYourEntity;

  @Inject
  UcManageYourEntity ucManageYourEntity;

  @GET
  @Path("/yourEntity/{id}/")
  public YourEntityDto getYourEntity(@PathParam("id") long id);

    return this.ucFindYourEntity.findYourEntity(id);
  }

  ...
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_summary">5.4.8. Summary</h4>
<div class="paragraph">
<p>As you have seen, some parts hardly differ when migrating a Spring application to a Quarkus application, while other parts differ more. The above sections describe the parts needed for simple applications that provide REST services with a data access layer.
If you add more functionality, more customization and other frameworks, dependencies may be required. If that is the case, take a look at the corresponding guide on the topic in the devon4j documentation or check if there is a tutorial on the official <a href="https://quarkus.io/guides/">Quarkus website</a>.</p>
</div>
<div class="paragraph">
<p>Furthermore, we can summarize that migrating from a Spring application to a Quarkus representative is not complex. Although Quarkus is a very young framework (release 1.0 was in 2019), it brings a lot of proven standards and libraries that you can integrate into your application.
This makes it easy to migrate and reuse code from existing (Spring) applications. Also, Quarkus comes with Spring API compatibility for many Spring modules (<a href="https://quarkus.io/guides/spring-data-jpa">Spring Data JPA</a>, <a href="https://quarkus.io/guides/spring-di">Spring DI</a>, <a href="https://github.com/quarkusio/quarkus/tree/main/extensions">etc.</a>), which makes it easier for developers to reuse their knowledge.</p>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect2">
<h3 id="_spring_native_vs_quarkus">5.5. Spring Native vs Quarkus</h3>
<div class="paragraph">
<p>Nowadays, it is very common to write an application and deploy it to a cloud.
Serverless computing and Function-as-a-Service (FaaS) have become
very popular.
While many challenges arise when deploying a Java application into the latest cloud environment, the biggest challenges facing developers are memory footprint and the startup time required
for the Java application, as more of these keeps the host&#8217;s costs high in public clouds and Kubernetes clusters. With the introduction of frameworks like micronaut and microprofile, Java processes are getting faster and more lightweight. In a similar context, Spring has introduced
<a href="https://docs.spring.io/spring-native/docs/current/reference/htmlsingle/#overview">Spring Native</a> which aims to solve the big memory footprint of Spring and its slow startup time to potentially rival the new framework called <a href="https://quarkus.io">Quarkus</a>, by Red Hat. This document briefly discusses both of these two frameworks and their potential suitability with devonfw.</p>
</div>
<div class="sect3">
<h4 id="_quarkus_3">5.5.1. Quarkus</h4>
<div class="paragraph">
<p>Quarkus is a full-stack, Kubernetes-native Java framework made for JVMs. With its container-first-philosophy and its native compilation with GraalVM, Quarkus optimizes Java for containers with low memory usage and fast startup times.</p>
</div>
<div class="paragraph">
<p>Quarkus achieves this in the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>First Class Support for GraalVM</strong></p>
</li>
<li>
<p><strong>Build Time Metadata Processing:</strong> As much processing as possible is
done at build time, so your application will only contain the classes
that are actually needed at runtime. This results in less memory usage,
and also faster startup time, as all metadata processing has already been
done.</p>
</li>
<li>
<p><strong>Reduction in Reflection Usage:</strong> Quarkus tries to avoid reflection as much as possible in order to reduce startup time and memory usage.</p>
</li>
<li>
<p><strong>Native Image Pre Boot:</strong> When running in a native image, Quarkus
pre-boots as much of the framework as possible during the native image
build process. This means that the resulting native image has already
run most of the startup code and serialized the result into the
executable, resulting in an even faster startup-time.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This gives Quarkus the potential for a great platform for serverless cloud and Kubernetes environments. For more information about Quarkus and its support for devonfw please refer to the <a href="quarkus.asciidoc">Quarkus introduction guide</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_spring_native_2">5.5.2. Spring Native</h4>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><strong>The current version of Spring Native 0.10.5 is designed to be used with Spring Boot 2.5.6</strong></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Like Quarkus, Spring Native provides support for compiling Spring applications to native executables using the GraalVM native-image compiler deisgned to be packaged in lightweight containers.</p>
</div>
<div class="paragraph">
<p>Spring Native is composed of the following modules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>spring-native:</strong> runtime dependency required for running Spring Native, provides also Native hints API.</p>
</li>
<li>
<p><strong>spring-native-configuration:</strong> configuration hints for Spring classes used by Spring AOT plugins, including various Spring Boot auto-configurations.</p>
</li>
<li>
<p><strong>spring-native-docs:</strong> reference guide, in asciidoc format.</p>
</li>
<li>
<p><strong>spring-native-tools:</strong> tools used for reviewing image building configuration and output.</p>
</li>
<li>
<p><strong>spring-aot:</strong> AOT transformation infrastructure common to Maven and Gradle plugins.</p>
</li>
<li>
<p><strong>spring-aot-test:</strong> Test-specific AOT transformation infrastructure.</p>
</li>
<li>
<p><strong>spring-aot-gradle-plugin:</strong> Gradle plugin that invokes AOT transformations.</p>
</li>
<li>
<p><strong>spring-aot-maven-plugin:</strong> Maven plugin that invokes AOT transformations.</p>
</li>
<li>
<p><strong>samples:</strong> contains various samples that demonstrate features usage and are used as integration tests.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_native_compilation_with_graalvm">5.5.3. Native compilation with GraalVM</h4>
<div class="paragraph">
<p>Quarkus and Spring Native both use GraalVM for native compilation. Using a native image provides some key advantages, such as instant startup, instant peak performance, and reduced memory consumption. However, there are also some drawbacks: Creating a native image is a heavy process that is slower than a regular application. A native image also has fewer runtime optimizations after its warmup. Furthermore, it is less mature than the JVM and comes with some different behaviors.</p>
</div>
<div class="paragraph">
<p><strong>Key characteristics:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Static analysis of the application from the main entry point is
performed at build time.</p>
</li>
<li>
<p>Unused parts are removed at build time.</p>
</li>
<li>
<p>Configuration required for reflection, resources, and dynamic proxies.</p>
</li>
<li>
<p>Classpath is fixed at build time.</p>
</li>
<li>
<p>No class lazy loading: everything shipped in the executables will be loaded in memory on startup.</p>
</li>
<li>
<p>Some code will run at build time.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are <a href="https://github.com/oracle/graal/blob/master/docs/reference-manual/native-image/Limitations.md">limitations</a> around some aspects of Java applications that are not fully supported</p>
</div>
</div>
<div class="sect3">
<h4 id="_build_time_and_start_time_for_apps">5.5.4. Build time and start time for apps</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Framework</th>
<th class="tableblock halign-left valign-top">build time</th>
<th class="tableblock halign-left valign-top">start time</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Native</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">19.615s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.913s</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quarkus Native executable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">52.818s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.802s</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_memory_footprints">5.5.5. Memory footprints</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Framework</th>
<th class="tableblock halign-left valign-top">memory footprint</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Native</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">109 MB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quarkus Native executable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">75 MB</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_considering_devonfw_best_practices">5.5.6. Considering devonfw best practices</h4>
<div class="paragraph">
<p>As of now, devonfw actively supports Spring but not Spring Native.
Although Quarkus has been released to a stable release in early 2021, it has been already used in multiple big projects successfully showing its potential to implement cloud native services with low resource consumption matching the needs of scalability and resilience in cloud native environments.
With major stakeholders behind the open source community like Red Hat, its development and growth from its kickoff to the current state is very impressive and really shows the market needs and focus.
Another big advantage of Quarkus is that it started on a green field and therefore did not need to circumvent main pillars of the spring framework like reflection, being able to take clean and up-to-date design decisions not needing to cope with legacy issues.
Nonetheless, there is a experimental support also for some spring libraries already available in Quarkus, which make switching from spring to Quarkus much more easier if needed.
We also provide a <a href="quarkus/getting-started-for-spring-developers.asciidoc">guide
for Spring developers</a> who want to adopt or try Quarkus for their
(next) projects as it really has some gamechanging advantages over
Spring.</p>
</div>
</div>
<div class="sect3">
<h4 id="_general_recommendations_and_conclusion">5.5.7. General recommendations and conclusion</h4>
<div class="paragraph">
<p>Quarkus and Spring Native both have their own use cases. Under the consideration of the limitations of GraalVM to be used for native images built by Quarkus and Spring Native, there is a strong recommendation towards Quarkus from devonfw.
One essential differentiation has to be made on the decision for native or against native applications - the foreseen performance optimization of the JIT compiler of the JVM, which is not available anymore in a native image deployment.
For sure, both component frameworks will also run on a JVM getting advantage again from JIT compilation, but depending on the overall landscape then, it is recommended to stay with the knowledge of the available teams, e.g. continue making use of devon4j based on spring or even if already in that state also here make use of Quarkus on JVM.</p>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect2">
<h3 id="_modern_project_structure">5.6. Modern project structure</h3>
<div class="paragraph">
<p>With trends such as cloud, microservices, lean, and agile, we decided for a more modern project structure that fits better to recent market trends.
When starting new projects with devonfw, and especially in the context of cloud-native development, we strongly recommend this modern approach over the <a href="guide-structure-classic.asciidoc">classic structure</a>.</p>
</div>
<div class="sect3">
<h4 id="_modules_2">5.6.1. Modules</h4>
<div class="paragraph">
<p>Due to trends such as microservices, we are building smaller apps compared to moduliths.
For simplicity, we therefore do not split our app into different modules and keep everything top-level and easy.</p>
</div>
<div class="paragraph">
<p>In addition to <code>java</code> and <code>resources</code>, we also add <code>helm</code> for helm templates and <code>docker</code> for docker scripts (e.g. <code>Dockerfile</code>) in <code>src/main</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>├──/src
|  ├──/main
|  |  ├──/docker
|  |  ├──/helm
|  |  ├──/java
|  |  └──/resources
|  └──/test
|     ├──/java
|     └──/resources
└──/pom.xml</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_deployment_2">5.6.2. Deployment</h4>
<div class="paragraph">
<p>For modern projects, we strongly recommend that your build process generates the final deliverable as an OCI compliant container.
Further, to go fully cloud-native, you should build your app as a native image via <a href="https://www.graalvm.org/">GraalVM</a> AOT compiler.
Therefore, we recommed to use <a href="https://quarkus.io/">quarkus</a> as your main framework.
In case you want to go with spring, you may consider using <a href="https://github.com/spring-projects-experimental/spring-native">spring-native</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_layers_3">5.6.3. Layers</h4>
<div class="paragraph">
<p>The package structure of your code inside <code>src/main/java</code> (and <code>src/test/java</code>) of your app is described in our coding conventions in the sections <a href="coding-conventions.asciidoc#packages">packages</a>.
For the modern project structure, the layers are defined by the following table:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Layer</strong></th>
<th class="tableblock halign-left valign-top"><strong>«layer»</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="guide-service-layer.asciidoc">service</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>service</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The service layer exposing functionality via its remote API. Typical protocol is <a href="guide-rest.asciidoc">REST</a>. May also be any other protocol you are using such as <a href="https://grpc.io/">gRPC</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="guide-domain-layer.asciidoc">domain</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>domain</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The domain with the data-model and DB access. Use sub-package (in <code>«detail»</code>) <code>repository</code> for <a href="guide-repository.asciidoc">repository</a> and <code>dao</code> for <a href="guide-dao.asciidoc">DAOs</a>. Also we recommend to put <a href="guide-jpa.asciidoc#entity">entities</a> in <code>model</code> sub-package.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="guide-logic-layer.asciidoc">logic</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logic</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The logic layer with the functionallity providing the business value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="guide-common.asciidoc">common</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>common</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cross-cutting code not assigned to a technical layer.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_architecture_mapping_2">5.6.4. Architecture Mapping</h4>
<div class="paragraph">
<p>In order to help you to map the architecture, packaging, layering, etc. to the code and see where different code elements should be placed,
we provide this architecture mapping:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>«root»
├──.<a href="guide-component.asciidoc#business-component">«component»</a>
|  ├──.<a href="guide-domain-layer.asciidoc">domain</a>
|  |  ├──.<a href="guide-repository.asciidoc">repo</a>
|  |  |  ├──.<a href="guide-repository.asciidoc#repository">«BusinessObject»Repository</a>
|  |  |  ├──.<a href="guide-repository.asciidoc#fragment">«BusinessObject»Fragment</a>
|  |  |  └──.<a href="guide-repository.asciidoc#fragment">«BusinessObject»FragmentImpl</a>
|  |  ├──.<a href="guide-dao.asciidoc">dao</a> [alternative to repo]
|  |  |  ├──.<a href="guide-dao.asciidoc#data-access-object">«BusinessObject»Dao</a>
|  |  |  └──.<a href="guide-dao.asciidoc#data-access-object">«BusinessObject»DaoImpl</a>
|  |  └──.model
|  |     └──.<a href="guide-jpa.asciidoc#entity">«BusinessObject»Entity</a>
|  ├──.<a href="guide-logic-layer.asciidoc">logic</a>
|  |  ├──«BusinessObject»Validator
|  |  └──«BusinessObject»EventsEmitter
|   |  └──.<a href="guide-usecase.asciidoc">Uc«Operation»«BusinessObject»[Impl</a>]
|  └──.<a href="guide-service-layer.asciidoc">rest</a>
|     └──.<a href="guide-service-versioning.asciidoc#jax-rs">v1</a>
|        ├──.<a href="guide-rest.asciidoc#jax-rs">«Component»RestService</a>
|        ├──.mapper
|        |     └──.«BusinessObject»Mapper
|        └──.model
|           └──.«BusinessObject»Dto
└──.<a href="guide-component.asciidoc#general-component">general</a>
   └──.domain
      └──.model
         └──.ApplicationPersistenceEntity</pre>
</div>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect2">
<h3 id="_domain_layer">5.7. Domain Layer</h3>
<div class="paragraph">
<p>The domain layer is responsible for the data-model and mapping it to a <a href="https://github.com/devonfw/devonfw-guide/blob/master/general/db/guide-database.asciidoc">database</a>.
The most common approach is to use a Relational Database Management System (RDMS). In such a case, we strongly recommend to follow our <a href="guide-jpa.asciidoc">JPA Guide</a>. Some NoSQL databases are supported by <a href="https://spring.io/projects/spring-data">spring-data</a>, so you can consider the <a href="guide-repository.asciidoc">repository guide</a>.</p>
</div>
<div class="paragraph">
<p>Note: The domain layer is the replacement for the <a href="guide-dataaccess-layer.asciidoc">data-access layer</a> in the <a href="guide-structure-modern.asciidoc">modern project structure</a>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_guides_2">5.8. Guides</h3>
<!-- toc disabled -->
<div class="sect3">
<h4 id="_getting_started_with_quarkus_for_spring_developers">5.8.1. Getting started with Quarkus for Spring developers</h4>
<div class="paragraph">
<p>As a Spring developer, you have heard more and more about Quarkus: its pros and cons, its fast growth etc. So, you decided to adopt/try Quarkus for your (next) project(s) and are wondering where to go next and what you need to pay attention to when moving from Spring to Quarkus.</p>
</div>
<div class="paragraph">
<p>This guide tries to address this exact concern. In the following, we will present you some main points you should be aware of when starting to develop with Quarkus, along with some useful sources.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Quarkus is a fairly new Java toolkit. Thus, it is very well documented. It also provides a set of well-written technical guides that are a good starting point to get in touch and make the first steps with Quarkus. See <a href="https://quarkus.io/get-started/">here</a>. It is an Open Source project licensed under the Apache License version 2.0. The source code is hosted in <a href="https://github.com/quarkusio/quarkus">GitHub</a>. If you have any questions or concerns, don&#8217;t hesitate to reach out to the <a href="https://quarkus.io/community/">Quarkus community</a>.</p>
</li>
<li>
<p>Same as <a href="https://start.spring.io/">Spring Initializr</a>, you can go to <a href="https://code.quarkus.io/">code.quarkus.io</a> to create a new application. Also, check out our <a href="quarkus-template.asciidoc">Template Quarkus Guide</a> to see our recommendations on certain topics.</p>
</li>
<li>
<p>In Spring stack, we recommend structuring your application into multiple modules, known as our <a href="../guide-structure-classic.asciidoc">classic structure</a>. Moving to Quarkus and the world of cloud-native microservices, where we build smaller applications compared to monoliths, we recommend keeping everything top-level and simple. Therefore, we propose the <a href="../guide-structure-modern.asciidoc">modern structure</a> as a better fit.</p>
</li>
<li>
<p>Quarkus focuses not only on delivering top features, but also on the developer experience. The <strong>Quarkus&#8217;s Live Coding</strong> feature automatically detects changes made to Java files, application configuration, static resources, or even classpath dependency changes and recompiles and redeploys the changes. As that, it solves the problem of traditional Java development workflow, hence improves productivity.</p>
<div class="listingblock">
<div class="content">
<pre>    Write Code → Compile → Deploy → Test Changes/ Refresh Browser/ etc → Repeat (traditional)
    Write Code → Test Changes/ Refresh Browser/ etc → Repeat (Quarkus)</pre>
</div>
</div>
<div class="paragraph">
<p>You can use this feature out of the box without any extra setup by running:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    mvn compile quarkus:dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another highlight feature to speed up developing is the Quarkus&#8217;s Dev Mode with <strong>Dev Services</strong>, which can automatically provision unconfigured services in development and test mode. This means that if you include an extension and don&#8217;t configure it, Quarkus will automatically start the relevant service and wire up your application to use it, therefore saving you a lot of time setting up those services manually. In production mode, where the real configuration is provided, Dev Services will be disabled automatically.</p>
</div>
<div class="paragraph">
<p>Additionally, you can access the <strong>Dev UI</strong> at <code>\q\dev</code> in Dev Mode to browse endpoints offered by various extensions, conceptually similar to what a Spring Boot actuator might provide.</p>
</div>
</li>
<li>
<p>Quarkus is made of a small core on which hundreds of extensions rely. In fact, the power of Quarkus is its extension mechanism. Think of these extensions as your project dependencies. You can add it per dependency manager such as maven or gradle.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>mvn quarkus:list-extensions
mvn quarkus:add-extension -Dextensions="groupId:artifactId"
(or add it manually to pom.xml)
# or
gradle list-extensions
(add dependency to build.gradle)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Like Spring Boot, Quarkus also has a vast ecosystem of extensions with commonly-used technologies.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 17. Example of common Quarkus extensions and the Spring Boot Starters with similar functionality (<a href="https://developers.redhat.com/e-books/quarkus-spring-developers">book: Quarkus for Spring Developer</a>)</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Quarkus extension</th>
<th class="tableblock halign-left valign-top">Spring Boot Starter</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus-resteasy-jackson</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring-boot-starter-web</p>
<p class="tableblock">spring-boot-starter-webflux</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus-resteasy-reactive-jackson</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring-boot-starter-web</p>
<p class="tableblock">spring-boot-starter-webflux</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus-hibernate-orm-panache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring-boot-starter-data-jpa</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus-hibernate-orm-rest-datapanache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring-boot-starter-data-rest</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus-hibernate-reactive-panache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring-boot-starter-data-r2dbc</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus-mongodb-panache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring-boot-starter-data-mongodb</p>
<p class="tableblock">spring-boot-starter-data-mongodb-reactive</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus-hibernate-validator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring-boot-starter-validation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus-qpid-jms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring-boot-starter-activemq</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus-artemis-jms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring-boot-starter-artemis</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus-cache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring-boot-starter-cache</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus-redis-client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring-boot-starter-data-redis</p>
<p class="tableblock">spring-boot-starter-data-redis-reactive</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus-mailer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring-boot-starter-mail</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus-quartz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring-boot-starter-quartz</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus-oidc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring-boot-starter-oauth2-resource-server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus-oidc-client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring-boot-starter-oauth2-client</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus-smallrye-jwt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring-boot-starter-security</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A full list of all Quarkus extensions can be found <a href="https://quarkus.pro/extensions/">here</a>. Furthermore, you can check out the community extensions hosted by <a href="https://github.com/quarkiverse/quarkiverse/wiki">Quarkiverse Hub</a>. Quarkus has some extensions for Spring API as well, which is helpful when migrating from Spring to Quarkus.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://quarkus.io/guides/spring-di">Quarkus Extension for Spring Dependency Injection</a></p>
</li>
<li>
<p><a href="https://quarkus.io/guides/spring-web">Quarkus Extension for Spring Web</a></p>
</li>
<li>
<p><a href="https://quarkus.io/guides/spring-data-jpa">Quarkus Extension for Spring Data JPA</a></p>
</li>
<li>
<p><a href="https://quarkus.io/guides/spring-security">Quarkus Extension for Spring Security</a></p>
</li>
<li>
<p><a href="https://quarkus.io/guides/spring-boot-properties">Quarkus Extension for Spring Boot Properties</a></p>
</li>
<li>
<p><a href="https://quarkus.io/guides/spring-cache">Quarkus Extension for Spring Cache</a></p>
</li>
<li>
<p><a href="https://quarkus.io/guides/spring-cloud-config-client">Quarkus Extension for Spring Cloud Config Client</a></p>
</li>
<li>
<p><a href="https://quarkus.io/guides/spring-data-rest">Quarkus Extension for Spring Data REST</a></p>
</li>
<li>
<p><a href="https://quarkus.io/guides/spring-scheduled">Quarkus Extension for Spring Scheduled</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Besides extensions, which are officially maintained by Quarkus team, Quarkus allows adding external libraries too. While extensions can be integrated seamlessly into Quarkus, as they can be processed at build time and be built in native mode with GraalVM, external dependencies might not work out of the box with native compilation. If that is the case, you have to recompile them with the right GraalVM configuration to make them work.</p>
</div>
</li>
<li>
<p>Quarkus' design accounted for native compilation by default. A Quarkus native executable starts much faster and utilizes far less memory than a traditional JVM (see our <a href="../performance-comparision-spring-quarkus.asciidoc">performace comparision between Spring and Quarkus</a>). To get familiar with building native executable, configuring and running it, please check out our <a href="guide-native-image.asciidoc">Native Image Guide</a>. Be sure to test your code in both JVM and native mode.</p>
</li>
<li>
<p>Both Quarkus and Spring include testing frameworks based on <a href="https://junit.org/junit5/">JUnit</a> and <a href="https://site.mockito.org/">Mockito</a>. Thus, by design, Quarkus enables test-driven development by detecting affected tests as changes are made and automatically reruns them in background. As that, it gives developer instant feedback, hence improves productivity. To use continuous testing, execute the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>mvn quarkus:dev</code></pre>
</div>
</div>
</li>
<li>
<p>For the sake of performance optimization, Quarkus avoids reflection as much as possible, favoring static class binding instead. When building a native executable, it analyzes the call tree and removes all the classes/methods/fields that are not used directly. As a consequence, the elements used via reflection are not part of the call tree so they are dead code eliminated (if not called directly in other cases).</p>
<div class="paragraph">
<p>A common example is the JSON library, which typically use reflection to serialize the objects to JSON. If you use them out of the box, you might encounter some errors in native mode. So, be sure to register the elements for reflection explicitly. A How-to is provided by <a href="https://quarkus.io/guides/writing-native-applications-tips#registering-for-reflection">Quarkus Registering For Reflection</a> with practical program snippets.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>A very good read on the topic is the e-book <a href="https://developers.redhat.com/e-books/quarkus-spring-developers">Quarkus for Spring Developers</a> by Red Hat. Another good source for direct hands-on coding tutorial is <a href="https://www.katacoda.com/openshift/courses/developing-with-quarkus/spring">Katacoda Quarkus for Spring Boot Developers</a></p>
</div>
<!-- toc disabled -->
</div>
<div class="sect3">
<h4 id="_configuration_4">5.8.2. Configuration</h4>
<div class="paragraph">
<p><a href="quarkus.asciidoc">Quarkus</a> provides a comprehensive guide on configuration <a href="https://quarkus.io/guides/config-reference">here</a>.</p>
</div>
<div class="sect4">
<h5 id="_external_application_configuration_2">External Application Configuration</h5>
<div class="sect5">
<h6 id="_database_configuration_3">Database Configuration</h6>
<div class="paragraph">
<p>In Quarkus, Hibernate is provided by the <code>quarkus-hibernate-orm</code> extension. Ensure the extension is added to your <code>pom.xml</code> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
  &lt;artifactId&gt;quarkus-hibernate-orm&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Additionally, you have to add the respective JDBC driver extension to your <code>pom.xml</code>. There are different drivers for different database types. See <a href="https://quarkus.io/guides/hibernate-orm#setting-up-and-configuring-hibernate-orm">Quarkus Hibernate guide</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_database_system_and_access_2">Database System and Access</h6>
<div class="paragraph">
<p>You need to configure which database type you want to use, as well as the location and credentials to access it. The defaults are configured in <code>application.properties</code>. The file should therefore contain the properties as in the given example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">quarkus.datasource.jdbc.url=jdbc:postgresql://database.enterprise.com/app
quarkus.datasource.username=appuser01
quarkus.datasource.password=************
quarkus.datasource.db-kind=postgresql

# drop and create the database at startup (use only for local development)
quarkus.hibernate-orm.database.generation=drop-and-create</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_database_logging_2">Database Logging</h6>
<div class="paragraph">
<p>Add the following properties to <code>application.properties</code> to enable logging of database queries for debugging purposes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.log.format-sql=true

#Logs SQL bind parameters. Setting it to true is obviously not recommended in production.
quarkus.hibernate-orm.log.bind-parameters=true</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_secrets_and_environment_specific_configurations">Secrets and environment specific configurations</h5>
<div class="sect5">
<h6 id="_environment_variables">Environment variables</h6>
<div class="paragraph">
<p>There are also some libraries to make Jasypt work with Quarkus, such as <a href="https://camel.apache.org/camel-quarkus/latest/reference/extensions/jasypt.html">Camel Quarkus Jasypt</a>. Unfortunately, this feature only works in JVM mode and not in native mode.</p>
</div>
<div class="paragraph">
<p>Quarkus supports many credential providers with official extensions, such as HashiCorp Vault.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>&lt;dependency&gt;
  &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
  &lt;artifactId&gt;quarkus-vault&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quarkus reads configuration values from several locations, ordered by a certain priority. An overview of these can be found at the official  <a href="https://quarkus.io/guides/config-extending-support">Quarkus config guide</a>.</p>
</div>
<div class="paragraph">
<p>Environment variables have a higher ordinal number and are therefore higher prioritized than e.g. the <code>application.properties</code> file.
So instead of storing secrets in plain text in the configuration files, it is better to use environment variables for critical values to configure the application.</p>
</div>
<div class="paragraph">
<p>Environment variables also have the advantage that they can be easily integrated into a containerized environment.
When using Kubernetes, the secrets can be stored as <em>Kubernetes secret</em> and then passed to the containers as an environment variable.</p>
</div>
</div>
<div class="sect5">
<h6 id="_custom_config_sources">Custom config sources</h6>
<div class="paragraph">
<p>Quarkus provides the possability to add custom config sources, which can be used to retrieve configuration values from custom locations.
For a description of this feature, see the <a href="https://quarkus.io/guides/config-extending-support#custom-config-source">corresponding Quarkus guide</a>.</p>
</div>
<div class="sect6">
<h7 id="_config_interceptors">Config interceptors</h7>
<div class="paragraph">
<p>Quarkus also allows with the concept of interceptors to hook into the resolution of configuration values. This can be useful when configuration values are encrypted or need to be extracted.
To do this, you have to implement a <code>ConfigSourceInterceptor</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-Java" data-lang="Java">public class CustomConfigInterceptor implements ConfigSourceInterceptor {

  @Override
  public ConfigValue getValue(ConfigSourceInterceptorContext context, String name) {

    ConfigValue configValue = context.proceed(name);
    if (name.equals("config-value-to-resolve")) {
      configValue = new ConfigValue.ConfigValueBuilder()
          .withName(name)
          .withValue(resolveConfigurationValue(name))
          .build();
    }

    return configValue;
  }

  private String resolveConfigurationValue(String name) {
    ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use the Interceptor, you must register it. To do this, create a file  <code>io.smallrye.config.ConfigSourceInterceptor</code> in the folder <code>src/main/resources/META-INF/services</code> and register the interceptor register the interceptor by writing the fully qualified class name to this file.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_credential_encryption">Credential encryption</h6>
<div class="paragraph">
<p>As for <a href="../spring/guide-spring-configuration.asciidoc#security">Spring</a>, there are also some libraries that let Jasypt work with Quarkus such as <a href="https://camel.apache.org/camel-quarkus/latest/reference/extensions/jasypt.html">Camel Quarkus Jasypt</a>. Unfortunately, this feature only works in JVM mode and not in native mode, so it is not a suitable approach.</p>
</div>
<div class="paragraph">
<p>If you want to store usernames or passwords in encrypted form or retrieve them from a custom store, you can use a custom <code>CredentialsProvider</code> for this purpose.
Consider the use case where you want to store your database credentials in encrypted form rather than in plain text. Then you can implement a credentials provider as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-Java" data-lang="Java">@ApplicationScoped
@Unremovable
public class DatabaseCredentialsProvider implements CredentialsProvider {

  @Override
  public Map&lt;String, String&gt; getCredentials(String credentialsProviderName) {

    Map&lt;String, String&gt; properties = new HashMap&lt;&gt;();
    properties.put(USER_PROPERTY_NAME, decryptUsername());
    properties.put(PASSWORD_PROPERTY_NAME, decryptPassword());
    return properties;
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the <code>application.properties</code> file you need to set <code>quarkus.datasource.credentials-provider=custom</code>.
For more information about the credentials provider, see the official <a href="https://quarkus.io/guides/credentials-provider">Quarkus guide</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_hashicorp_vault">HashiCorp Vault</h6>
<div class="paragraph">
<p>For centralized management of secrets and other critical configuration values, you can use <a href="https://www.vaultproject.io/">HashiCorp Vault</a> as external management tool.</p>
</div>
<div class="paragraph">
<p>For detailed instructions on how to integrate Vault into your Quarkus application, see the official <a href="https://quarkus.io/guides/vault">Quarkus guide</a>.</p>
</div>
<!-- toc disabled -->
</div>
</div>
</div>
<div class="sect3">
<h4 id="_spring_native_vs_quarkus_2">5.8.3. Spring Native vs Quarkus</h4>
<div class="paragraph">
<p>Nowadays, it is very common to write an application and deploy it to a cloud.
Serverless computing and Function-as-a-Service (FaaS) have become
very popular.
While many challenges arise when deploying a Java application into the latest cloud environment, the biggest challenges facing developers are memory footprint and the startup time required
for the Java application, as more of these keeps the host&#8217;s costs high in public clouds and Kubernetes clusters. With the introduction of frameworks like micronaut and microprofile, Java processes are getting faster and more lightweight. In a similar context, Spring has introduced
<a href="https://docs.spring.io/spring-native/docs/current/reference/htmlsingle/#overview">Spring Native</a> which aims to solve the big memory footprint of Spring and its slow startup time to potentially rival the new framework called <a href="https://quarkus.io">Quarkus</a>, by Red Hat. This document briefly discusses both of these two frameworks and their potential suitability with devonfw.</p>
</div>
<div class="sect4">
<h5 id="_quarkus_4">Quarkus</h5>
<div class="paragraph">
<p>Quarkus is a full-stack, Kubernetes-native Java framework made for JVMs. With its container-first-philosophy and its native compilation with GraalVM, Quarkus optimizes Java for containers with low memory usage and fast startup times.</p>
</div>
<div class="paragraph">
<p>Quarkus achieves this in the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>First Class Support for GraalVM</strong></p>
</li>
<li>
<p><strong>Build Time Metadata Processing:</strong> As much processing as possible is
done at build time, so your application will only contain the classes
that are actually needed at runtime. This results in less memory usage,
and also faster startup time, as all metadata processing has already been
done.</p>
</li>
<li>
<p><strong>Reduction in Reflection Usage:</strong> Quarkus tries to avoid reflection as much as possible in order to reduce startup time and memory usage.</p>
</li>
<li>
<p><strong>Native Image Pre Boot:</strong> When running in a native image, Quarkus
pre-boots as much of the framework as possible during the native image
build process. This means that the resulting native image has already
run most of the startup code and serialized the result into the
executable, resulting in an even faster startup-time.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This gives Quarkus the potential for a great platform for serverless cloud and Kubernetes environments. For more information about Quarkus and its support for devonfw please refer to the <a href="quarkus.asciidoc">Quarkus introduction guide</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_spring_native_3">Spring Native</h5>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><strong>The current version of Spring Native 0.10.5 is designed to be used with Spring Boot 2.5.6</strong></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Like Quarkus, Spring Native provides support for compiling Spring applications to native executables using the GraalVM native-image compiler deisgned to be packaged in lightweight containers.</p>
</div>
<div class="paragraph">
<p>Spring Native is composed of the following modules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>spring-native:</strong> runtime dependency required for running Spring Native, provides also Native hints API.</p>
</li>
<li>
<p><strong>spring-native-configuration:</strong> configuration hints for Spring classes used by Spring AOT plugins, including various Spring Boot auto-configurations.</p>
</li>
<li>
<p><strong>spring-native-docs:</strong> reference guide, in asciidoc format.</p>
</li>
<li>
<p><strong>spring-native-tools:</strong> tools used for reviewing image building configuration and output.</p>
</li>
<li>
<p><strong>spring-aot:</strong> AOT transformation infrastructure common to Maven and Gradle plugins.</p>
</li>
<li>
<p><strong>spring-aot-test:</strong> Test-specific AOT transformation infrastructure.</p>
</li>
<li>
<p><strong>spring-aot-gradle-plugin:</strong> Gradle plugin that invokes AOT transformations.</p>
</li>
<li>
<p><strong>spring-aot-maven-plugin:</strong> Maven plugin that invokes AOT transformations.</p>
</li>
<li>
<p><strong>samples:</strong> contains various samples that demonstrate features usage and are used as integration tests.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_native_compilation_with_graalvm_2">Native compilation with GraalVM</h5>
<div class="paragraph">
<p>Quarkus and Spring Native both use GraalVM for native compilation. Using a native image provides some key advantages, such as instant startup, instant peak performance, and reduced memory consumption. However, there are also some drawbacks: Creating a native image is a heavy process that is slower than a regular application. A native image also has fewer runtime optimizations after its warmup. Furthermore, it is less mature than the JVM and comes with some different behaviors.</p>
</div>
<div class="paragraph">
<p><strong>Key characteristics:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Static analysis of the application from the main entry point is
performed at build time.</p>
</li>
<li>
<p>Unused parts are removed at build time.</p>
</li>
<li>
<p>Configuration required for reflection, resources, and dynamic proxies.</p>
</li>
<li>
<p>Classpath is fixed at build time.</p>
</li>
<li>
<p>No class lazy loading: everything shipped in the executables will be loaded in memory on startup.</p>
</li>
<li>
<p>Some code will run at build time.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are <a href="https://github.com/oracle/graal/blob/master/docs/reference-manual/native-image/Limitations.md">limitations</a> around some aspects of Java applications that are not fully supported</p>
</div>
</div>
<div class="sect4">
<h5 id="_build_time_and_start_time_for_apps_2">Build time and start time for apps</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Framework</th>
<th class="tableblock halign-left valign-top">build time</th>
<th class="tableblock halign-left valign-top">start time</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Native</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">19.615s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.913s</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quarkus Native executable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">52.818s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.802s</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_memory_footprints_2">Memory footprints</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Framework</th>
<th class="tableblock halign-left valign-top">memory footprint</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Native</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">109 MB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quarkus Native executable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">75 MB</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_considering_devonfw_best_practices_2">Considering devonfw best practices</h5>
<div class="paragraph">
<p>As of now, devonfw actively supports Spring but not Spring Native.
Although Quarkus has been released to a stable release in early 2021, it has been already used in multiple big projects successfully showing its potential to implement cloud native services with low resource consumption matching the needs of scalability and resilience in cloud native environments.
With major stakeholders behind the open source community like Red Hat, its development and growth from its kickoff to the current state is very impressive and really shows the market needs and focus.
Another big advantage of Quarkus is that it started on a green field and therefore did not need to circumvent main pillars of the spring framework like reflection, being able to take clean and up-to-date design decisions not needing to cope with legacy issues.
Nonetheless, there is a experimental support also for some spring libraries already available in Quarkus, which make switching from spring to Quarkus much more easier if needed.
We also provide a <a href="quarkus/getting-started-for-spring-developers.asciidoc">guide
for Spring developers</a> who want to adopt or try Quarkus for their
(next) projects as it really has some gamechanging advantages over
Spring.</p>
</div>
</div>
<div class="sect4">
<h5 id="_general_recommendations_and_conclusion_2">General recommendations and conclusion</h5>
<div class="paragraph">
<p>Quarkus and Spring Native both have their own use cases. Under the consideration of the limitations of GraalVM to be used for native images built by Quarkus and Spring Native, there is a strong recommendation towards Quarkus from devonfw.
One essential differentiation has to be made on the decision for native or against native applications - the foreseen performance optimization of the JIT compiler of the JVM, which is not available anymore in a native image deployment.
For sure, both component frameworks will also run on a JVM getting advantage again from JIT compilation, but depending on the overall landscape then, it is recommended to stay with the knowledge of the available teams, e.g. continue making use of devon4j based on spring or even if already in that state also here make use of Quarkus on JVM.</p>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect3">
<h4 id="_quarkus_template">5.8.4. Quarkus template</h4>
<div class="paragraph">
<p><a href="https://code.quarkus.io/?g=org.devonfw&amp;e=resteasy&amp;e=resteasy-jackson&amp;e=hibernate-validator&amp;e=hibernate-orm&amp;e=micrometer">Quarkus Code Generator</a> is provides many alternative technologies and libraries that can be integrated into a project. Detailed guides on multiple topics can be found <a href="https://quarkus.io/guides/">here</a>.</p>
</div>
<div class="paragraph">
<p>Due to the large selection, getting started can be difficult for developers.
In this guide we aim to provide a general suggestion on basic frameworks, libraries, and technologies to make it easy for developers to begin with.</p>
</div>
<div class="paragraph">
<p>With that said, please take this as a recommendation and not as a compulsion. Depending on your project requirements, you might have to use another stack compared to what is listed below.</p>
</div>
<div class="paragraph">
<p>If you are new to Quarkus, consider checking out their <a href="https://quarkus.io/guides/getting-started">getting started guide</a> to get an overview of how to create, run, test, as well as package a Quarkus application. Another recommended source to get started is <a href="https://www.katacoda.com/openshift/courses/developing-with-quarkus/getting-started">the Katacoda tutorials</a>.</p>
</div>
<div class="sect5">
<h6 id="_basic_templates">Basic templates</h6>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>simple REST API (<a href="https://code.quarkus.io/?g=com.devonfw&amp;e=resteasy&amp;e=resteasy-jackson&amp;e=hibernate-validator&amp;e=hibernate-orm">go to code.quarkus.io</a>)</p>
</li>
<li>
<p>simple REST API with monitoring (<a href="https://code.quarkus.io/?g=com.devonfw&amp;e=resteasy&amp;e=resteasy-jackson&amp;e=hibernate-validator&amp;e=hibernate-orm&amp;e=micrometer&amp;e=smallrye-health">go to code.quarkus.io</a>)</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 18. Topic-based suggested implementation</caption>
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Topic</th>
<th class="tableblock halign-left valign-top">Detail</th>
<th class="tableblock halign-left valign-top">Suggested implementation</th>
<th class="tableblock halign-left valign-top">Note</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">runtime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">servlet-container</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Undertow</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">component management</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dependency injection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ArC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ArC is based on JSR 365. It also provides interceptors that can be used to implement the same functionality as AOP provides</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">configuration</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://quarkus.io/guides/config">SmallRye Config</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SmallRye Config is an implementation of Eclipse MicroProfile Config. It also supports YAML configuration files</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">persistence</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OR-mapper</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://quarkus.io/guides/hibernate-orm">Hibernate ORM</a>, <a href="https://quarkus.io/guides/spring-data-jpa">Spring Data JPA</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hibernate ORM is the de facto standard JPA implementation and works perfectly in Quarkus. Quarkus also provides a compatibility layer for Spring Data JPA repositories in the form of the <code>spring-data-jpa</code> extension.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">batch</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quarkus JBeret Extension is a non-official extension, which is hosted in the <a href="https://github.com/quarkiverse/">Quarkiverse Hub</a>. It is an implementation of JSR 352.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="3"><p class="tableblock">service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST services</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://quarkus.io/guides/rest-json">RESTEasy</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RESTEasy is an portable implementation of the new JCP specification JAX-RS JSR-311. It can be documented via Swagger OpenAPI.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">async messaging</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://quarkus.io/guides/kafka">SmallRye Reactive Messaging</a>, Vert.x EventBus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SmallRye Reactive Messaging is an implementation of the Eclipse MicroProfile Reactive Messaging specification 1.0. You can also utilize SmallRye Reactive Messaging in your Quarkus application to interact with Apache Kafka.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">marshalling</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RESTEasy Jackson, RESTEasy JSON-B, RESTEasy JAXB, RESTEasy Multipart</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">cloud</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">kubernetes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deployment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minikube, k3d</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minikube is quite popular when a Kubernetes cluster is needed for development purposes. Quarkus supports this with the <code>quarkus-minikube</code> extension.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">logging</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">framework</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://quarkus.io/guides/logging">JBoss Log Manager and the JBoss Logging facade</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Internally, Quarkus uses JBoss Log Manager and the JBoss Logging facade. Logs from other supported Logging API (JBoss Logging, SLF4J, Apache Commons Logging) will be merged.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">validation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">framework</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://quarkus.io/guides/validation">Hibernate Validator</a>/Bean Validation (JSR 380)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">security</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">authentication &amp; authorization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JWT authentication</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quarkus supports <a href="https://quarkus.io/guides/security">various security mechanisms</a>. Depending on your protocol, identity provider you can choose the necessary extensions such as <code>quarkus-oidc</code> <code>quarkus-smallrye-jwt</code> <code>quarkus-elytron-security-oauth2</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="3"><p class="tableblock">monitoring</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">framework</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://quarkus.io/guides/micrometer">Micrometer Metrics</a>, <a href="https://quarkus.io/guides/smallrye-metrics">SmallRye Metrics</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SmallRye Metrics is an implementation of the MicroProfile Metrics specification. Quarkus also offers various extensions to customize the metrics.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">health</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://quarkus.io/guides/smallrye-health">SmallRye Health</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SmallRye Health is an implementation of the MicroProfile Health specification.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fault tolerance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://quarkus.io/guides/smallrye-fault-tolerance">SmallRye Fault Tolerance</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SmallRye Fault Tolerance is an implementation of the MicroProfile Fault Tolerance specification.</p></td>
</tr>
</tbody>
</table>
<!-- toc disabled -->
</div>
</div>
<div class="sect3">
<h4 id="_building_a_native_image">5.8.5. Building a native image</h4>
<div class="paragraph">
<p>Quarkus provides the ability to create a native executable of the application called <em><a href="https://quarkus.io/guides/building-native-image">native image</a></em>.
Unlike other Java based deployments, a native image will only run on the architecture and operating system it is compiled for.
Also, no JVM is needed to run the native-image.
This improves the startup time, performance, and efficiency.
A distribution of <a href="https://www.graalvm.org/">GraalVM</a> is needed.
You can find the differences between the available distributions <a href="https://quarkus.io/guides/building-native-image#graalvm">here</a>.</p>
</div>
<div class="paragraph">
<p>To build your quarkus app as a native-image, you have two options that are described in the following sections.</p>
</div>
<div class="sect4">
<h5 id="_build_a_native_executable_with_graalvm">Build a native executable with GraalVM</h5>
<div class="paragraph">
<p>To build a Quarkus application, you can install GraalVM locally on your machine, as described below.
Therefore, read the <a href="quarkus-template.asciidoc#basic-templates">basic Quarkus application chapter</a>, or clone the <a href="https://github.com/devonfw-sample/devon4quarkus-reference">example project</a> provided by devonfw.
Follow this <a href="https://quarkus.io/guides/building-native-image#producing-a-native-executable">chapter</a> from the Quarkus Guide for building a native executable.</p>
</div>
<div class="sect5">
<h6 id="_installing_graalvm">Installing GraalVM</h6>
<div class="paragraph">
<p>A native image can be created locally or through a container environment.
To create a native image locally, an installed and configured version of GraalVM is needed. You can follow the <a href="https://quarkus.io/guides/building-native-image#prerequisites-for-oracle-graalvm-ceee">installation guide from Quarkus</a> or the <a href="https://www.graalvm.org/docs/getting-started/#install-graalvm">guide provided by GraalVM</a> for this.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_build_a_native_executable_with_graalvm_through_container_environment">Build a native executable with GraalVM through container environment</h5>
<div class="paragraph">
<p>In order to make the build of native images more portable, you can also use your container environment and run the GraalVM inside a container (typically Docker).
You can simply install Docker with your devonfw-ide distribution, just follow this description <a href="https://github.com/devonfw/ide/blob/master/documentation/docker.asciidoc">Docker with devonfw-ide</a>.
Follow this <a href="https://quarkus.io/guides/building-native-image#container-runtime">chapter</a> to build a native Linux image through container runtime.</p>
</div>
</div>
<div class="sect4">
<h5 id="_configuring_the_native_executable">Configuring the native executable</h5>
<div class="paragraph">
<p>A list of all configuration properties for a native image can be found <a href="https://quarkus.io/guides/building-native-image#configuration-reference">here</a>.</p>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect3">
<h4 id="_bean_mapping_with_quarkus">5.8.6. Bean mapping with Quarkus</h4>
<div class="paragraph">
<p>This guide will show bean-mapping, in particular for a Quarkus application. We recommend using <a href="https://mapstruct.org/">MapStruct</a> with a Quarkus application because the other bean-mapper frameworks use Java reflections. They are not supported in GraalVm right now and cause problems when building native applications. MapStruct is a code generator that greatly simplifies the implementation of mappings between Java bean types based on a convention over configuration approach. The mapping code will be generated at compile-time and uses plain method invocations and is thus fast, type-safe, and easy to understand. MapStruct has to be configured to not use Java reflections, which will be shown in this guide.</p>
</div>
<div class="paragraph">
<p>You can find the official
<a href="https://mapstruct.org/documentation/stable/reference/pdf/mapstruct-reference-guide.pdf">MapStruct reference guide</a> and a general introduction to MapStruct from <a href="https://www.baeldung.com/mapstruct">Baeldung</a>.</p>
</div>
<div class="sect4">
<h5 id="_mapstruct_dependency">MapStruct Dependency</h5>
<div class="paragraph">
<p>To get access to MapStruct, we have to add the dependency to our POM.xml:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;
  &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;
  &lt;version&gt;1.4.2.Final&lt;/version&gt;
  &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>MapStruct provides an annotation processor that also has to be added to the POM.xml</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
	&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
	&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
	&lt;version&gt;3.8.1&lt;/version&gt;
	&lt;configuration&gt;
		&lt;source&gt;1.8&lt;/source&gt;
		&lt;target&gt;1.8&lt;/target&gt;
		&lt;annotationProcessorPaths&gt;
			&lt;path&gt;
				&lt;groupId&gt;org.mapstruct&lt;/groupId&gt;
				&lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;
				&lt;version&gt;1.4.2.Final&lt;/version&gt;
			&lt;/path&gt;
		&lt;/path&gt;
		&lt;/annotationProcessorPaths&gt;
	&lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>MapStruct takes advantage of generated getters, setters, and constructors from the <a href="https://projectlombok.org/">Lombok</a> library, follow this <a href="../guide-lombok.asciidoc#lombok-with-mapstruct">Lombok with Mapstruct guide</a> to get Lombok with Mapstruct working.</p>
</div>
</div>
<div class="sect4">
<h5 id="_mapstruct_configuration">MapStruct Configuration</h5>
<div class="paragraph">
<p>We already discussed the benefits of <a href="https://github.com/devonfw/devon4j/blob/master/documentation/guide-dependency-injection.asciidoc#dependency-injection">dependency injection</a>. MapStruct supports CDI with EJB, spring, and jsr330. The default retrieving method for a mapper is a factory that uses reflections, which should be avoided. The component model should be set to CDI, as this will allow us to easily inject the generated mapper implementation. The component model can be configured in multiple ways.</p>
</div>
<div class="sect5">
<h6 id="_simple_configuration">Simple Configuration</h6>
<div class="paragraph">
<p>Add the attribute <strong>componentModel</strong> to the <strong>@Mapper</strong> annotation in the mapper interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Mapper(compnentModel = "cdi")
public interface ProductMapper{
  ...
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_mapperconfig_configuration">MapperConfig Configuration</h6>
<div class="paragraph">
<p>Create a shared configuration that can be used for multiple mappers. Implement an interface and use the annotation <strong>@MapperConfig</strong> for the class. You can define all configurations in this interface and pass the generated <code>MapperConfig.class</code> with the <strong>config</strong> attribute to the mapper. The <code>MapperConfig</code> also defines the <strong>InjectionStrategy</strong> and <strong>MappingInheritaceStrategy</strong>, both of which will be explained later.
A list of all configurations can be found <a href="https://mapstruct.org/documentation/stable/api/org/mapstruct/MapperConfig.html">here</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@MapperConfig(
  compnentModel = "cdi",
  mappingInheritanceStrategy = MappingInheritanceStrategy.AUTO_INHERIT_FROM_CONFIG
  injectionStrategy =InjectionStrategy.CONSTRUCTOR
)
public interface MapperConfig{
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Mapper( config = MapperConfig.class )
public interface ProductMapper{
  ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Any attributes not given via <strong>@Mapper</strong> will be inherited from the shared configuration <code>MapperConfig.class</code>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_configuration_via_annotation_processor_options">Configuration via annotation processor options</h6>
<div class="paragraph">
<p>The MapStruct code generator can be configured using annotation processor options.
You can pass the options to the compiler while invoking javac directly, or add the parameters to the maven configuration in the POM.xml</p>
</div>
<div class="paragraph">
<p>We also use the constructor injection strategy to avoid field injections and potential reflections. This will also simplify our tests.</p>
</div>
<div class="paragraph">
<p>The option to pass the parameter to the annotation processor in the POM.xml is used and can be inspected in our <a href="https://github.com/devonfw-sample/devon4quarkus-reference/blob/master/pom.xml#L220-L228">quarkus reference project</a>.</p>
</div>
<div class="paragraph">
<p>A list of all annotation processor options can be found <a href="https://mapstruct.org/documentation/dev/reference/html/#configuration-options">here</a>.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_basic_bean_mapper_usage">Basic Bean-Mapper Usage</h5>
<div class="paragraph">
<p>To use the mapper, we have to implement the mapper interface and the function prototypes with a <strong>@Mapper</strong> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Mapper
public interface ProductMapper {

  ProductDto map(ProductEntity model);

  ProductEntity create(NewProductDto dto);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The MapStruct annotation processor will generate the implementation for us under <code>/target/generated-sources/</code>, we just need to tell it that we would like to have a method that accepts a <code>ProductEntity</code> entity and returns a new <code>ProductDto</code> DTO.</p>
</div>
<div class="paragraph">
<p>The generated mapper implementation will be marked with the <strong>@ApplicationScoped</strong> annotation and can thus be injected into fields, constructor arguments, etc. using the <strong>@Inject</strong> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class ProductRestService{

  @Inject
  ProductMapper mapper;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>That is the basic usage of a Mapstruct mapper. In the next chapter, we&#8217;ll go into a bit more detail and show some more configurations.</p>
</div>
</div>
<div class="sect4">
<h5 id="_advanced_bean_mapper_usage">Advanced Bean-Mapper Usage</h5>
<div class="paragraph">
<p>Let´s assume that our <code>Product</code> entity and the <code>ProductDto</code> have some differently named properties that should be mapped. Add a mapping annotation to map the property <strong>type</strong> from <code>Product</code> to <strong>kind</strong> from <code>ProductDto</code>. We define the source name of the property and the target name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Mapper
public interface ProductMapper {
  @Mapping(target = "kind", source = "type")
  ProductDto map(ProductEntity entity);

  @InheritInverseConfiguration(name = "map" )
  ProductEntity create(ProductDto dto);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For bi-directional mappings, we can indicate that a method shall inherit the inverse configuration of the corresponding method with the <strong>@InheritInverseConfiguration</strong>. You can omit the name parameter if the result type of method A is the same as the
single-source type of method B and if the single-source type of A is the same as the result type of B. If multiple apply, the attribute name is needed. Specific mappings from the inverse method can (optionally) be overridden, ignored, or set to constants or expressions.</p>
</div>
<div class="paragraph">
<p>The mappingInheritanceStrategy can be defined as showed in <a href="Quarkus.html#_mapstruct_configuration">MapStruct Configuration</a>. The existing options can be found <a href="https://mapstruct.org/documentation/dev/reference/html/#shared-configurations">here</a>.</p>
</div>
<div class="paragraph">
<p>A mapped attribute does not always have the same type in the source and target objects. For instance, an attribute may be of type <code>int</code> in the source bean but of type <code>Long</code> in the target bean.</p>
</div>
<div class="paragraph">
<p>Another example are references to other objects which should be mapped to the corresponding types in the target model. E.g. the class <code>ShoppingCart</code> might have a property <strong>content</strong> of the type <code>Product</code> which needs to be converted into a <code>ProductDto</code> object when mapping a <code>ShoppingCart</code> object to <code>ShoppingCartDto</code>. For these cases, it&#8217;s useful to understand how Mapstruct <a href="https://mapstruct.org/documentation/dev/reference/html/#datatype-conversions">converts the data types</a> and the <a href="https://mapstruct.org/documentation/dev/reference/html/#mapping-object-references">object references</a>.</p>
</div>
<div class="paragraph">
<p>Also, the Chapter for <a href="https://mapstruct.org/documentation/dev/reference/html/#controlling-nested-bean-mappings">nested bean mappings</a> will help to configure MapStruct to map arbitrarily deep object graphs.</p>
</div>
<div class="paragraph">
<p>You can study running MapStruct implementation examples given by <a href="https://github.com/mapstruct/mapstruct-examples">MapStruct</a> or in our <a href="https://github.com/devonfw-sample/devon4quarkus-reference">Quarkus reference project</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="Spring.html">Spring</a> | ↑ Up: <a href="devon4j-documentation.html">Java</a> | ⌂ Home: <a href="sample.html">MultipageHtml5Converter Sample</a></p>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. "Stammdaten" in German.
</div>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Whether to use checked exceptions or not is a controversial topic. Arguments for both sides can be found under <a href="https://www.artima.com/intv/handcuffs.html">The Trouble with Checked Exceptions</a>, <a href="https://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html">Unchecked Exceptions — The Controversy</a>, and <a href="https://phauer.com/2015/checked-exceptions-are-evil/">Checked Exceptions are Evil</a>. The arguments in favor of unchecked exceptions tend to prevail for applications built with devon4j. Therefore, unchecked exceptions should be used for a consistent style.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-03-21 12:54:18 +0100
</div>
</div>
</body>
</html>